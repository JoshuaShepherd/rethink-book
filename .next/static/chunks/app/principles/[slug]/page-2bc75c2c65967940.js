(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[754],{80:(e,s,t)=>{"use strict";t.d(s,{u:()=>i,z:()=>r});class a{track(e,s){this.enabled&&(new Date().toISOString(),window.location.href,"undefined"!=typeof navigator&&navigator.userAgent)}trackLessonView(e,s){this.track("lesson_view",{principleSlug:e,lessonId:s,component:"ModulePlayer"})}trackReflectionSave(e,s){this.track("reflection_save",{reflectionId:e,wordCount:s,component:"ReflectionPrompt"})}trackSimulationChoice(e,s,t){this.track("simulation_choice",{simulationId:e,choiceId:s,delta:t,component:"SimulationChoice"})}trackFieldExperimentSubmit(e){this.track("field_submit",{experimentId:e,component:"FieldExperimentCard"})}trackLessonComplete(e,s){this.track("lesson_mark_complete",{principleSlug:e,lessonId:s,component:"ProgressSummary"})}trackScriptureOpen(e){this.track("scripture_open",{reference:e,component:"Scripture"})}disable(){this.enabled=!1}enable(){this.enabled=!0}constructor(){this.enabled=!0}}let r=new a,i=(e,s)=>{r.track(e,s)}},3998:(e,s,t)=>{"use strict";t.d(s,{$:()=>o});var a=t(5155),r=t(2115),i=t(3101),n=t(4269);let l=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 elegant-transition",{variants:{variant:{default:"bg-primary text-white hover:bg-primary/80 shadow-glow hover:shadow-glow-lg",secondary:"bg-secondary text-white hover:bg-secondary/80 shadow-glow-emerald",premium:"bg-gradient-to-r from-accent-gold to-primary text-white hover:from-accent-gold/80 hover:to-primary/80 shadow-glow-gold",glass:"bg-surface-glass backdrop-blur-glass border border-glass-border hover:bg-surface-elevated/80 hover:border-glass-white/30 text-text-primary",outline:"border border-gray-300 dark:border-gray-700 bg-background hover:bg-surface hover:text-text-primary",ghost:"hover:bg-surface hover:text-text-primary",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",xl:"h-14 rounded-xl px-12 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,s)=>{let{className:t,variant:r,size:i,asChild:o=!1,...c}=e;return(0,a.jsx)("button",{className:(0,n.cn)(l({variant:r,size:i,className:t})),ref:s,...c})});o.displayName="Button"},4269:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i});var a=t(2821),r=t(5889);function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},6707:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eN});var a=t(5155),r=t(2115),i=t(63),n=t(3998),l=t(6948),o=t(4269),c=t(5626),d=t(368),m=t(7937),h=t(5229),u=t(9540),x=t(2619),p=t.n(x),g=t(2663),f=t(7259);let j=f.bL,b=f.R6,y=f.Ke;var N=t(7586),v=t(1169),w=t(4374),k=t(5299),C=t(4033),A=t(6168),R=t(2529);let S=e=>{let{type:s}=e;switch(s){case"REFLECTION":default:return(0,a.jsx)(N.A,{className:"h-4 w-4"});case"SIMULATION":return(0,a.jsx)(v.A,{className:"h-4 w-4"});case"FIELD_EXPERIMENT":return(0,a.jsx)(w.A,{className:"h-4 w-4"})}},I=e=>{let{type:s}=e;switch(s){case"REFLECTION":return"Reflection";case"SIMULATION":return"Simulation";case"FIELD_EXPERIMENT":return"Field Experiment";default:return"Activity"}},E=e=>{let{lessons:s,activities:t,currentLessonId:i,currentActivityId:l,completedLessons:c,completedActivities:d,onLessonSelect:h,onActivitySelect:u,isLoading:x=!1,className:p}=e,[g,f]=(0,r.useState)(new Set(i?[i]:[]));return x?(0,a.jsx)("div",{className:(0,o.cn)("space-y-4",p),children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 animate-spin text-muted-foreground"}),(0,a.jsx)("div",{className:"h-4 flex-1 animate-pulse rounded bg-muted"})]}),(0,a.jsxs)("div",{className:"ml-7 space-y-1",children:[(0,a.jsx)("div",{className:"h-3 w-3/4 animate-pulse rounded bg-muted/50"}),(0,a.jsx)("div",{className:"h-3 w-1/2 animate-pulse rounded bg-muted/50"})]})]},e))}):(0,a.jsx)("nav",{className:(0,o.cn)("space-y-2",p),role:"navigation","aria-label":"Lesson navigation",children:s.map((e,s)=>{let r,x=e.id===i,p=c.includes(e.id),N=g.has(e.id),v=(r=e.id,t.filter(e=>e.lessonId===r).sort((e,s)=>e.order-s.order));return(0,a.jsx)(j,{open:N,onOpenChange:()=>(e=>{let s=new Set(g);s.has(e)?s.delete(e):s.add(e),f(s)})(e.id),children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:(0,o.cn)("group flex items-center gap-3 rounded-lg p-3 transition-all hover:bg-muted/50",x&&"bg-primary/10 ring-1 ring-primary/20"),children:[(0,a.jsx)(b,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-auto p-0 hover:bg-transparent","aria-expanded":N,"aria-label":"".concat(N?"Collapse":"Expand"," lesson ").concat(s+1),children:N?(0,a.jsx)(C.A,{className:"h-4 w-4 text-muted-foreground"}):(0,a.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"})})}),(0,a.jsxs)("button",{onClick:()=>h(e.id),className:(0,o.cn)("flex flex-1 items-center gap-3 text-left transition-colors",x?"text-primary":"text-foreground hover:text-primary"),"aria-current":x?"page":void 0,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-muted text-xs font-medium",children:s+1}),e.muxAssetId&&(0,a.jsx)(A.A,{className:"h-3 w-3 text-muted-foreground"})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"truncate font-medium",children:e.title}),e.keyTakeaways&&e.keyTakeaways.length>0&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.keyTakeaways.length," key takeaway",1===e.keyTakeaways.length?"":"s"]})]}),p&&(0,a.jsx)(R.A,{className:"h-4 w-4 text-green-500","aria-label":"Lesson completed"})]})]}),(0,a.jsx)(y,{className:"space-y-1",children:(0,a.jsx)("div",{className:"ml-6 border-l border-gray-300 dark:border-gray-700 pl-4 space-y-1",children:v.map((s,t)=>{var r;let i=s.id===l,n=d.includes(s.id);return(0,a.jsxs)("button",{onClick:()=>u(s.id,e.id),className:(0,o.cn)("flex w-full items-center gap-3 rounded-lg p-2 text-left text-sm transition-all hover:bg-muted/50",i&&"bg-primary/10 ring-1 ring-primary/20"),"aria-current":i?"page":void 0,children:[(0,a.jsx)(S,{type:s.type}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("p",{className:(0,o.cn)("truncate",i?"text-primary font-medium":"text-foreground"),children:[(0,a.jsx)(I,{type:s.type})," ",t+1]}),"REFLECTION"===s.type&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground truncate",children:[null==(r=s.payload.prompt)?void 0:r.substring(0,50),"..."]})]}),n&&(0,a.jsx)(R.A,{className:"h-3 w-3 text-green-500","aria-label":"Activity completed"})]},s.id)})})})]})},e.id)})})};var M=t(5921),T=t(3511),L=t(2068),P=t(5130),D=t(684),F=t(5870),W=t(1397);let z=e=>{let{muxAssetId:s,title:t="Lesson Video",poster:i,className:l}=e,[c,d]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[u,x]=(0,r.useState)(!0),[p,g]=(0,r.useState)(!1),f=(0,r.useRef)(null),j=(0,r.useRef)(),b=(0,r.useCallback)(()=>{f.current&&(c?f.current.pause():f.current.play(),d(!c))},[c]),y=(0,r.useCallback)(()=>{f.current&&(f.current.muted=!m,h(!m))},[m]),N=(0,r.useCallback)(()=>{g(!p)},[p]),v=(0,r.useCallback)(()=>{f.current&&(document.fullscreenElement?document.exitFullscreen():f.current.requestFullscreen())},[]);return((0,r.useEffect)(()=>{let e=e=>{if(f.current)switch(e.code){case"Space":e.preventDefault(),b();break;case"KeyM":e.preventDefault(),y();break;case"KeyC":e.preventDefault(),N();break;case"KeyF":e.preventDefault(),v()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[b,y,N,v]),s)?(0,a.jsxs)("div",{className:(0,o.cn)("relative aspect-video w-full overflow-hidden rounded-xl bg-black",l),onMouseMove:()=>{x(!0),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{x(!1)},3e3)},onMouseLeave:()=>x(!1),children:[(0,a.jsxs)("video",{ref:f,className:"h-full w-full object-cover",poster:i,onPlay:()=>d(!0),onPause:()=>d(!1),"aria-label":t,children:[(0,a.jsx)("source",{src:"https://stream.mux.com/".concat(s,".m3u8"),type:"application/x-mpegURL"}),(0,a.jsx)("track",{kind:"captions",srcLang:"en",label:"English captions",default:p})]}),(0,a.jsxs)("div",{className:(0,o.cn)("absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent transition-opacity duration-300",u?"opacity-100":"opacity-0 hover:opacity-100"),children:[(0,a.jsx)("button",{onClick:b,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full bg-black/50 p-4 text-white transition-all hover:bg-black/70 focus:outline-none focus:ring-2 focus:ring-white","aria-label":c?"Pause video":"Play video",children:c?(0,a.jsx)(T.A,{className:"h-8 w-8"}):(0,a.jsx)(M.A,{className:"ml-1 h-8 w-8"})}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:b,className:"text-white hover:bg-white/20","aria-label":c?"Pause":"Play",children:c?(0,a.jsx)(T.A,{className:"h-4 w-4"}):(0,a.jsx)(M.A,{className:"h-4 w-4"})}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:y,className:"text-white hover:bg-white/20","aria-label":m?"Unmute":"Mute",children:m?(0,a.jsx)(L.A,{className:"h-4 w-4"}):(0,a.jsx)(P.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:N,className:(0,o.cn)("text-white hover:bg-white/20",p&&"bg-white/20"),"aria-label":"Toggle captions","aria-pressed":p,children:(0,a.jsx)(D.A,{className:"h-4 w-4"})}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20","aria-label":"Settings",children:(0,a.jsx)(F.A,{className:"h-4 w-4"})}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:v,className:"text-white hover:bg-white/20","aria-label":"Fullscreen",children:(0,a.jsx)(W.A,{className:"h-4 w-4"})})]})})]}),(0,a.jsx)("div",{className:"absolute right-4 top-4",children:(0,a.jsx)("div",{className:"rounded bg-black/50 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100",children:"Space: Play/Pause • M: Mute • C: Captions • F: Fullscreen"})})]}):(0,a.jsx)("div",{className:(0,o.cn)("relative flex aspect-video w-full items-center justify-center rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",l),role:"img","aria-label":"Video placeholder - no video available for this lesson",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary/10",children:(0,a.jsx)(M.A,{className:"h-8 w-8 text-primary","aria-hidden":"true"})}),(0,a.jsx)("h3",{className:"mb-2 text-lg font-medium text-foreground",children:t}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Video content will be available soon"})]})})};var _=t(6348),Z=t(3327),B=t(6132),$=t(1362),O=t(5789),Y=t(8446),U=t(5880),K=t(80);let q={Callout:e=>{let{children:s,variant:t="note",className:r}=e,{icon:i,className:n}={note:{icon:Z.A,className:"border-blue-200 bg-blue-50/50 text-blue-900 dark:border-blue-800 dark:bg-blue-950/50 dark:text-blue-100"},warning:{icon:B.A,className:"border-amber-200 bg-amber-50/50 text-amber-900 dark:border-amber-800 dark:bg-amber-950/50 dark:text-amber-100"},success:{icon:$.A,className:"border-green-200 bg-green-50/50 text-green-900 dark:border-green-800 dark:bg-green-950/50 dark:text-green-100"}}[t];return(0,a.jsxs)("div",{className:(0,o.cn)("my-6 flex gap-3 rounded-xl border p-4",n,r),role:"note","aria-label":"".concat(t," callout"),children:[(0,a.jsx)(i,{className:"mt-0.5 h-5 w-5 flex-shrink-0","aria-hidden":"true"}),(0,a.jsx)("div",{className:"flex-1 [&>*:first-child]:mt-0 [&>*:last-child]:mb-0",children:s})]})},Quote:e=>{let{children:s,author:t,className:r}=e;return(0,a.jsx)("blockquote",{className:(0,o.cn)("my-6 border-l-4 border-primary/30 pl-6 italic",r),children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(O.A,{className:"absolute -left-2 -top-1 h-4 w-4 text-primary/40","aria-hidden":"true"}),(0,a.jsx)("div",{className:"text-foreground/90 [&>*:first-child]:mt-0 [&>*:last-child]:mb-0",children:s}),t&&(0,a.jsx)("footer",{className:"mt-3 text-sm text-muted-foreground",children:(0,a.jsxs)("cite",{children:["— ",t]})})]})})},Scripture:e=>{let{children:s,ref:t,className:i}=e,[l,c]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:(0,o.cn)("my-6 rounded-xl border border-primary/20 bg-primary/5 p-4",i),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(Y.A,{className:"h-4 w-4 text-primary","aria-hidden":"true"}),(0,a.jsx)("span",{className:"font-medium text-primary",children:t})]}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>{c(!l),K.z.trackScriptureOpen(t)},className:"h-auto p-1","aria-expanded":l,"aria-label":"".concat(l?"Collapse":"Expand"," scripture ").concat(t),children:(0,a.jsx)(U.A,{className:"h-3 w-3"})})]}),l&&(0,a.jsx)("div",{className:"mt-4 border-t border-primary/10 pt-4",children:(0,a.jsx)("div",{className:"prose prose-sm max-w-none dark:prose-invert [&>*:first-child]:mt-0 [&>*:last-child]:mb-0",children:s})}),!l&&(0,a.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Click to explore this passage"})]})},h1:e=>{let{children:s,...t}=e;return(0,a.jsx)("h1",{className:"mb-6 text-3xl font-bold tracking-tight text-foreground",...t,children:s})},h2:e=>{let{children:s,...t}=e;return(0,a.jsx)("h2",{className:"mb-4 mt-8 text-2xl font-semibold tracking-tight text-foreground",...t,children:s})},h3:e=>{let{children:s,...t}=e;return(0,a.jsx)("h3",{className:"mb-3 mt-6 text-xl font-semibold tracking-tight text-foreground",...t,children:s})},p:e=>{let{children:s,...t}=e;return(0,a.jsx)("p",{className:"mb-4 leading-relaxed text-foreground/90",...t,children:s})},ul:e=>{let{children:s,...t}=e;return(0,a.jsx)("ul",{className:"mb-4 ml-6 list-disc space-y-2",...t,children:s})},ol:e=>{let{children:s,...t}=e;return(0,a.jsx)("ol",{className:"mb-4 ml-6 list-decimal space-y-2",...t,children:s})},li:e=>{let{children:s,...t}=e;return(0,a.jsx)("li",{className:"text-foreground/90",...t,children:s})},strong:e=>{let{children:s,...t}=e;return(0,a.jsx)("strong",{className:"font-semibold text-foreground",...t,children:s})},em:e=>{let{children:s,...t}=e;return(0,a.jsx)("em",{className:"italic text-foreground/90",...t,children:s})},hr:e=>{let{...s}=e;return(0,a.jsx)("hr",{className:"my-8 border-gray-300 dark:border-gray-700",...s})}},G=e=>{let{children:s,className:t}=e;return(0,a.jsx)("div",{className:t,children:(0,a.jsx)(_.x,{components:q,children:(0,a.jsx)("div",{className:"prose prose-lg max-w-none dark:prose-invert",children:s})})})},V=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});V.displayName="Textarea";var X=t(9142),J=t(9e3),H=t(6046);let Q=e=>{let{activityId:s,payload:t,initialValue:i="",onSave:l,className:c}=e,[d,m]=(0,r.useState)(i),[h,u]=(0,r.useState)(!1),[x,p]=(0,r.useState)(null),[f,j]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),[N,v]=(0,r.useState)(null),w=(0,r.useRef)(null),k=(0,r.useRef)(null),C=(0,r.useRef)(null);(0,r.useEffect)(()=>{C.current&&C.current.focus()},[]);let A=d.trim().split(/\s+/).filter(e=>e.length>0).length,S=!t.minWords||A>=t.minWords,I=d.trim().length>0&&S,E=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),s=new MediaRecorder(e);w.current=s;let t=[];s.ondataavailable=e=>{t.push(e.data)},s.onstop=()=>{let s=new Blob(t,{type:"audio/webm"});p(s),e.getTracks().forEach(e=>e.stop())},s.start(),u(!0),setTimeout(()=>{w.current&&"recording"===w.current.state&&T()},6e4)}catch(e){console.error("Error starting recording:",e),g.oR.error("Unable to access microphone")}},T=()=>{w.current&&"recording"===w.current.state&&(w.current.stop(),u(!1))},L=async()=>{if(I){y(!0);try{await l(d,x||void 0),v(new Date),K.z.trackReflectionSave(s,A),g.oR.success("Reflection saved successfully")}catch(e){console.error("Error saving reflection:",e),g.oR.error("Failed to save reflection")}finally{y(!1)}}};return(0,a.jsxs)("div",{className:(0,o.cn)("space-y-6",c),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-3 text-lg font-semibold text-foreground",children:"Reflection Prompt"}),(0,a.jsx)("p",{className:"leading-relaxed text-foreground/90",children:t.prompt}),t.minWords&&(0,a.jsxs)("p",{className:"mt-2 text-sm text-muted-foreground",children:["Minimum ",t.minWords," words required"]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"reflection-text",className:"sr-only",children:"Your reflection"}),(0,a.jsx)(V,{ref:C,id:"reflection-text",placeholder:"Share your thoughts and insights here...",value:d,onChange:e=>m(e.target.value),className:"min-h-[200px] resize-y","aria-describedby":"word-count reflection-help"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{id:"word-count",className:(0,o.cn)("text-sm",S?"text-muted-foreground":"text-destructive"),children:[A," word",1===A?"":"s"]}),N&&(0,a.jsxs)("span",{className:"flex items-center gap-1 text-sm text-green-600",children:[(0,a.jsx)(R.A,{className:"h-3 w-3"}),"Saved at ",N.toLocaleTimeString()]})]}),(0,a.jsx)("div",{id:"reflection-help",className:"sr-only",children:t.minWords&&!S&&"Need ".concat(t.minWords-A," more words to meet minimum requirement")})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium text-foreground",children:"Optional Audio Note (Max 60 seconds)"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[h?(0,a.jsxs)(n.$,{onClick:T,variant:"outline",size:"sm",className:"animate-pulse border-red-500 text-red-600 hover:bg-red-50","aria-label":"Stop audio recording",children:[(0,a.jsx)(J.A,{className:"mr-2 h-4 w-4"}),"Stop Recording"]}):(0,a.jsxs)(n.$,{onClick:E,variant:"outline",size:"sm",disabled:h,"aria-label":"Start audio recording",children:[(0,a.jsx)(X.A,{className:"mr-2 h-4 w-4"}),"Record Note"]}),x&&(0,a.jsxs)(n.$,{onClick:()=>{if(!x)return;if(k.current){k.current.pause(),k.current=null,j(!1);return}let e=new Audio(URL.createObjectURL(x));k.current=e,j(!0),e.onended=()=>{j(!1),k.current=null},e.play()},variant:"outline",size:"sm","aria-label":f?"Stop audio playback":"Play audio note",children:[(0,a.jsx)(M.A,{className:"mr-2 h-4 w-4"}),f?"Stop":"Play"," Note"]})]}),x&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Audio note recorded successfully"})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(n.$,{onClick:L,disabled:!I||b,"aria-live":"polite",children:[(0,a.jsx)(H.A,{className:"mr-2 h-4 w-4"}),b?"Saving...":"Save Reflection"]})}),!S&&d.length>0&&(0,a.jsxs)("div",{className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:["Please write at least ",t.minWords," words to complete this reflection."]})]})};var ee=t(1524),es=t(6921),et=t(8314);let ea=e=>{let{activityId:s,payload:t,onChoiceSelect:i,className:c}=e,[d,h]=(0,r.useState)(null),[u,x]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:(0,o.cn)("space-y-6",c),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-3 text-lg font-semibold text-foreground",children:"Simulation"}),(0,a.jsx)("p",{className:"leading-relaxed text-foreground/90",children:t.scenario})]}),u?(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)(l.Zp,{className:"border-2 border-primary/20",children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2 text-base",children:["Your Choice",(0,a.jsx)(R.A,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsx)(l.BT,{className:"mt-1",children:null==d?void 0:d.label})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[d&&(e=>e>0?(0,a.jsx)(ee.A,{className:"h-4 w-4 text-green-600"}):e<0?(0,a.jsx)(es.A,{className:"h-4 w-4 text-red-600"}):(0,a.jsx)(B.A,{className:"h-4 w-4 text-yellow-600"}))(d.delta),(0,a.jsx)("span",{className:"font-medium",children:d&&(e=>e>0?"Strengthens incarnational practice":e<0?"Misses incarnational opportunity":"Mixed results - learning opportunity")(d.delta)})]})]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"mb-2 font-medium text-foreground",children:"Why this matters:"}),(0,a.jsx)("p",{className:"text-sm leading-relaxed text-foreground/90",children:null==d?void 0:d.rationale})]}),(0,a.jsxs)("div",{className:"rounded-lg bg-primary/5 p-4",children:[(0,a.jsx)("h5",{className:"mb-2 font-medium text-primary",children:"What this forms in you:"}),(0,a.jsxs)("p",{className:"text-sm leading-relaxed text-foreground/90",children:[d&&d.delta>0&&"This choice deepens your incarnational instincts. You're learning to prioritize presence and relationship over programs and productivity.",d&&0===d.delta&&"This choice shows good intentions, but incarnational mission requires deeper commitment to consistency and relationship-building over time.",d&&d.delta<0&&"This choice reveals how easy it is to default to our preferences rather than truly receiving from others. Incarnational mission starts with listening, not leading."]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(n.$,{onClick:()=>{h(null),x(!1)},variant:"outline",size:"sm",className:"flex items-center gap-2",children:[(0,a.jsx)(et.A,{className:"h-4 w-4"}),"Try Again"]}),(0,a.jsxs)(n.$,{onClick:()=>{g.oR.success("Simulation complete! Ready for the next step.")},size:"sm",className:"flex items-center gap-2",children:["Continue",(0,a.jsx)(m.A,{className:"h-4 w-4"})]})]})]})})]})}):(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsx)("h4",{className:"font-medium text-foreground",children:"What would you do?"}),(0,a.jsx)("div",{className:"grid gap-3",children:t.choices.map(e=>(0,a.jsx)(l.Zp,{className:"cursor-pointer transition-all hover:ring-2 hover:ring-primary/20",onClick:()=>(e=>{h(e),x(!0),K.z.trackSimulationChoice(s,e.id,e.delta),i(e.id,e.delta),e.delta>0?g.oR.success("Great choice! You're thinking incarnationally."):0===e.delta?(0,g.oR)("Good start! There's wisdom to learn here."):(0,g.oR)("Learning moment! This helps us grow in wisdom.")})(e),children:(0,a.jsx)(l.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(l.ZB,{className:"text-base leading-relaxed",children:e.label}),(0,a.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"})]})})},e.id))})]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,a.jsxs)("p",{children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Remember:"}),' There\'s no penalty for trying different choices. This is about learning and formation, not getting the "right" answer.']})})]})};var er=t(814),ei=t(6983),en=t(5740),el=t(3457),eo=t(1194),ec=t(5664),ed=t(8085);let em=e=>{let{activityId:s,payload:t,onSubmit:i,className:c}=e,[d,m]=(0,r.useState)(!1),[h,u]=(0,r.useState)(new Set),[x,p]=(0,r.useState)(""),[f,j]=(0,r.useState)(null),[b,y]=(0,r.useState)(!1),N=async()=>{if(x.trim().length<10)return void g.oR.error("Please share a bit more about your experience (at least 10 characters).");y(!0);try{await i(x,d,f||void 0),K.z.trackFieldExperimentSubmit(s),g.oR.success("\uD83C\uDF89 Field experiment submitted! You're living incarnationally.",{duration:5e3}),p(""),j(null),u(new Set)}catch(e){console.error("Error submitting field experiment:",e),g.oR.error("Failed to submit reflection. Please try again.")}finally{y(!1)}},v=!t.checklist||t.checklist.length===h.size;return(0,a.jsxs)("div",{className:(0,o.cn)("space-y-6",c),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-3 text-lg font-semibold text-foreground",children:"Field Experiment"}),(0,a.jsxs)(l.Zp,{className:"border-primary/20 bg-primary/5",children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2 text-primary",children:[(0,a.jsx)(er.A,{className:"h-5 w-5"}),t.title]}),(0,a.jsxs)(l.BT,{className:"mt-2 flex items-center gap-2 text-sm",children:[(0,a.jsx)(ei.A,{className:"h-4 w-4"}),"Suggested time: ",t.suggestedDuration]})]}),(0,a.jsx)(en.A,{className:"h-6 w-6 text-primary/60"})]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("p",{className:"leading-relaxed text-foreground/90",children:t.instructions})})]})]}),d?(0,a.jsxs)("div",{className:"space-y-4",children:[t.checklist&&t.checklist.length>0&&(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{className:"text-base",children:"Practice Guide"}),(0,a.jsx)(l.BT,{children:"Check off each step as you complete it"})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)("div",{className:"space-y-3",children:t.checklist.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[(0,a.jsx)("button",{onClick:()=>(e=>{let s=new Set(h);s.has(e)?s.delete(e):s.add(e),u(s)})(s),className:(0,o.cn)("mt-0.5 flex-shrink-0 transition-colors",h.has(s)?"text-green-600":"text-muted-foreground hover:text-foreground"),"aria-label":"".concat(h.has(s)?"Uncheck":"Check"," step ").concat(s+1),children:h.has(s)?(0,a.jsx)(eo.A,{className:"h-5 w-5"}):(0,a.jsx)(J.A,{className:"h-5 w-5"})}),(0,a.jsx)("span",{className:(0,o.cn)("text-sm leading-relaxed",h.has(s)?"line-through text-muted-foreground":"text-foreground"),children:e})]},s))}),v&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:(0,a.jsxs)("p",{className:"text-sm text-green-800 dark:text-green-200 flex items-center gap-2",children:[(0,a.jsx)(eo.A,{className:"h-4 w-4"}),"Great work! Now share your experience below."]})})]})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{className:"text-base",children:"Share Your Experience"}),(0,a.jsx)(l.BT,{children:"What did you notice? How did it feel? What did you learn?"})]}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"experiment-reflection",className:"sr-only",children:"Your reflection on the field experiment"}),(0,a.jsx)(V,{id:"experiment-reflection",placeholder:"Describe what happened during your field experiment...",value:x,onChange:e=>p(e.target.value),className:"min-h-[120px]"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Optional: Add a photo"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=document.getElementById("photo-upload"))?void 0:e.click()},className:"flex items-center gap-2",children:[(0,a.jsx)(ec.A,{className:"h-4 w-4"}),f?"Change Photo":"Add Photo"]}),f&&(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:f.name})]}),(0,a.jsx)("input",{id:"photo-upload",type:"file",accept:"image/*",onChange:e=>{var s;let t=null==(s=e.target.files)?void 0:s[0];t&&t.type.startsWith("image/")&&(j(t),g.oR.success("Photo added! This will help you remember the experience."))},className:"hidden"})]}),(0,a.jsx)("div",{className:"flex justify-end pt-2",children:(0,a.jsxs)(n.$,{onClick:N,disabled:x.trim().length<10||b,className:"flex items-center gap-2",children:[(0,a.jsx)(ed.A,{className:"h-4 w-4"}),b?"Submitting...":"Submit Reflection"]})})]})]})]}):(0,a.jsx)(l.Zp,{className:"border-dashed border-2",children:(0,a.jsx)(l.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(el.A,{className:"mx-auto h-8 w-8 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-foreground mb-2",children:"Ready to try this?"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Incarnational mission happens through intentional practice, not just good intentions."}),(0,a.jsxs)(n.$,{onClick:()=>{m(!0),g.oR.success("Great! You've committed to this practice. Now go live it out.",{icon:"\uD83C\uDFAF",duration:4e3})},className:"flex items-center gap-2",children:[(0,a.jsx)(el.A,{className:"h-4 w-4"}),"I'll try this"]})]})]})})}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground p-4 bg-muted/30 rounded-lg",children:[(0,a.jsxs)("p",{className:"mb-2",children:[(0,a.jsx)("strong",{children:"Remember:"})," Field experiments are about faithful presence, not perfect performance."]}),(0,a.jsx)("p",{children:'The goal isn\'t to "do it right" but to practice incarnational rhythms that form you over time.'})]})]})};var eh=t(9051),eu=t(6613),ex=t(318);let ep=e=>{let{type:s}=e;switch(s){case"REFLECTION":return(0,a.jsx)(N.A,{className:"h-3 w-3"});case"SIMULATION":return(0,a.jsx)(v.A,{className:"h-3 w-3"});case"FIELD_EXPERIMENT":return(0,a.jsx)(w.A,{className:"h-3 w-3"});default:return(0,a.jsx)(eh.A,{className:"h-3 w-3"})}},eg=e=>{let{principleTitle:s,lessons:t,activities:r,currentLessonId:i,completedLessons:c,completedActivities:d,onMarkComplete:m,className:h}=e,u=t.length+r.length,x=c.length+d.length,p=u>0?x/u*100:0,f=t.find(e=>e.id===i),j=i&&c.includes(i);return(0,a.jsxs)("div",{className:(0,o.cn)("space-y-6",h),children:[(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.aR,{className:"pb-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("svg",{className:"h-16 w-16 transform -rotate-90",viewBox:"0 0 36 36",children:[(0,a.jsx)("path",{className:"stroke-muted",strokeDasharray:"100, 100",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),(0,a.jsx)("path",{className:"stroke-primary transition-all duration-500",strokeDasharray:"".concat(p,", 100"),strokeWidth:"3",strokeLinecap:"round",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})]}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-lg font-bold text-primary",children:[Math.round(p),"%"]})})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(l.ZB,{className:"text-base leading-tight",children:"Module Progress"}),(0,a.jsxs)(l.BT,{children:[x," of ",u," completed"]})]}),100===p&&(0,a.jsx)(eu.A,{className:"h-6 w-6 text-yellow-500"})]})})}),f&&(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{className:"pb-3",children:(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(er.A,{className:"h-4 w-4"}),"Current Lesson"]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-foreground leading-snug",children:f.title}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Lesson ",t.findIndex(e=>e.id===i)+1," ","of ",t.length]})]}),j?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 dark:bg-green-950/20 px-3 py-2 rounded-lg",children:[(0,a.jsx)(R.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Lesson Complete"})]}):(0,a.jsxs)(n.$,{onClick:()=>{i&&!j&&(m(i),K.z.trackLessonComplete(s.toLowerCase().replace(/\s+/g,"-"),i),g.oR.success('Lesson "'.concat(null==f?void 0:f.title,'" marked complete! \uD83C\uDF89'),{duration:4e3}))},className:"w-full flex items-center gap-2",size:"sm",children:[(0,a.jsx)(R.A,{className:"h-4 w-4"}),"Mark Lesson Complete"]})]})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{className:"pb-3",children:(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(ex.A,{className:"h-4 w-4"}),"Your Progress"]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h5",{className:"text-sm font-medium text-foreground mb-2",children:["Lessons (",c.length,"/",t.length,")"]}),(0,a.jsx)("div",{className:"space-y-1",children:t.map((e,s)=>{let t=c.includes(e.id),r=e.id===i;return(0,a.jsxs)("div",{className:(0,o.cn)("flex items-center gap-2 text-sm p-2 rounded-lg transition-colors",r&&"bg-primary/10",t&&!r&&"text-muted-foreground"),children:[t?(0,a.jsx)(R.A,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(eh.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{className:"flex-1 truncate",children:[s+1,". ",e.title]}),r&&(0,a.jsx)(ei.A,{className:"h-3 w-3 text-primary"})]},e.id)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h5",{className:"text-sm font-medium text-foreground mb-2",children:["Activities (",d.length,"/",r.length,")"]}),(0,a.jsx)("div",{className:"space-y-1",children:r.map(e=>{let s=d.includes(e.id);return(0,a.jsxs)("div",{className:(0,o.cn)("flex items-center gap-2 text-sm p-2 rounded-lg",s&&"text-muted-foreground"),children:[s?(0,a.jsx)(R.A,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(eh.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(ep,{type:e.type}),(0,a.jsxs)("span",{className:"flex-1 truncate",children:["REFLECTION"===e.type&&"Reflection","SIMULATION"===e.type&&"Simulation","FIELD_EXPERIMENT"===e.type&&"Field Experiment"]})]},e.id)})})]})]})})]}),100===p&&(0,a.jsx)(l.Zp,{className:"border-yellow-200 bg-yellow-50 dark:border-yellow-800 dark:bg-yellow-950/20",children:(0,a.jsx)(l.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center space-y-3",children:[(0,a.jsx)(eu.A,{className:"mx-auto h-12 w-12 text-yellow-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-foreground",children:"Module Complete! \uD83C\uDF89"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"You've completed all lessons and activities for this principle."})]}),(0,a.jsx)(n.$,{variant:"outline",size:"sm",children:"Continue to Next Module"})]})})})]})},ef=[{id:"1",slug:"missionary-nature-of-god",title:"Rethink the Missionary Nature of God",summary:"Discover how mission begins with God's heart, not human initiative. Explore the Trinity as the ultimate sending community.",estMinutes:35,badgeId:"badge_missio_dei"},{id:"2",slug:"missio-dei",title:"Rethink Missio Dei",summary:"Understand God's mission as the framework for all Christian life and ministry. We don't bring God to the world—we join God who is already there.",estMinutes:40,badgeId:"badge_missio_dei"},{id:"3",slug:"incarnational-mission",title:"Rethink Incarnational Mission",summary:"Learn the power of presence before proclamation. Jesus moved into the neighborhood—so should we.",estMinutes:45,badgeId:"badge_incarnation"},{id:"4",slug:"vocation",title:"Rethink Vocation (Whole-Life Mission)",summary:"Your workplace isn't where you make money to fund ministry—it IS ministry. Discover everyday vocation as mission.",estMinutes:50,badgeId:"badge_vocation"},{id:"5",slug:"multiplication",title:"Rethink Multiplication",summary:"Move beyond addition to multiplication. Learn to plant seeds that grow into movements, not just ministries.",estMinutes:38,badgeId:"badge_multiplication"},{id:"6",slug:"post-christendom",title:"Rethink Life in a Post-Christendom Context",summary:"Navigate ministry when Christianity is no longer culturally central. Find freedom in the margins.",estMinutes:42,badgeId:"badge_post_christendom"},{id:"7",slug:"discipleship",title:"Rethink Discipleship as Everyday Apprenticeship",summary:"Discipleship isn't a program—it's a way of life. Learn to mentor others in ordinary moments.",estMinutes:47,badgeId:"badge_discipleship"},{id:"8",slug:"teams",title:"Rethink Teams on Mission",summary:"Mission is a team sport. Discover how to build and sustain teams that multiply impact.",estMinutes:41,badgeId:"badge_teams"},{id:"9",slug:"place",title:"Rethink Place, Parish, and Neighborhood",summary:"Geography matters in mission. Learn to see your place as your parish and your neighborhood as your mission field.",estMinutes:44,badgeId:"badge_place"},{id:"10",slug:"contextualization",title:"Rethink Cultural Distance & Contextualization",summary:"Bridge cultural gaps with wisdom and humility. Learn to translate the gospel without compromising it.",estMinutes:39,badgeId:"badge_contextualization"},{id:"11",slug:"sending",title:"Rethink Sending & Planting Pathways",summary:"Explore diverse pathways for church planting and sending in the 21st century.",estMinutes:43,badgeId:"badge_sending"},{id:"12",slug:"metrics",title:"Rethink Kingdom Metrics (Long Haul, Not Quick Fix)",summary:"Measure what matters in kingdom work. Learn metrics that honor faithfulness over flashiness.",estMinutes:36,badgeId:"badge_metrics"}],ej=[{id:"lesson-01",principleId:"3",title:"Theology of Incarnation (Presence before Proclamation)",order:1,mdxPath:"/content/principles/incarnational-mission/lesson-01.mdx",keyTakeaways:["People become receptive after they feel received","Incarnation means proximity and presence, not just proclamation","Mission begins with learning, not teaching"]},{id:"lesson-02",principleId:"3",title:"Practices of Presence",order:2,mdxPath:"/content/principles/incarnational-mission/lesson-02.mdx",keyTakeaways:["Seek the welfare of your city through consistent presence","Join existing good rather than always starting something new","Incarnational mission requires the long view"]},{id:"lesson-vocation-01",principleId:"4",title:"Your Work as Worship",order:1,mdxPath:"/content/principles/vocation/lesson-01.mdx",keyTakeaways:["Every job is a calling when done for God's glory","Workplace relationships are opportunities for incarnational presence","Excellence in work is a form of witness"]}],eb=[{id:"reflection-01",lessonId:"lesson-01",type:"REFLECTION",order:1,payload:{prompt:'Where in your weekly rhythm do you need to "move closer"? Consider your neighborhood, workplace, and third places. What would incarnational presence look like in these contexts?',minWords:40}},{id:"simulation-01",lessonId:"lesson-02",type:"SIMULATION",order:1,payload:{scenario:"You've just moved to a new neighborhood and want to live incarnationally. What's your first move?",choices:[{id:"choice-a",label:"Start a weekly program at your house",rationale:"While hosting is generous, starting with your own programming risks importing your preferences before listening to the community. Incarnational presence begins with receiving, not giving.",delta:-1},{id:"choice-b",label:"Join the local running club or community group",rationale:"Excellent! You're entering existing community life with a posture of learner. This demonstrates incarnational presence—joining what's already happening rather than creating something new.",delta:1},{id:"choice-c",label:'Volunteer at the local school once to "get visibility"',rationale:"Volunteering shows good intention, but one-time visibility doesn't build the relationships that incarnational mission requires. Presence is about consistency and depth, not exposure.",delta:0}]}},{id:"field-experiment-01",lessonId:"lesson-02",type:"FIELD_EXPERIMENT",order:2,payload:{title:"Find Your Third Place",instructions:'Spend one intentional hour at a caf\xe9, park, gym, or other "third place" this week. Your goal is simple presence: learn one name, notice one need, and pray a short blessing for the space and its people.',suggestedDuration:"1 hour",checklist:["Choose a consistent location you can return to regularly","Introduce yourself to at least one person (staff member, regular, etc.)","Observe the rhythms and needs of the space","Pray quietly for the place and its people","Journal about what you noticed and learned"]}}];function ey(e){return eb.filter(s=>s.lessonId===e)}function eN(e){var s,t,x;let{params:f}=e,{slug:j}=(0,r.use)(f),[b,y]=(0,r.useState)(null),[N,v]=(0,r.useState)(null),[w,k]=(0,r.useState)(!1),[C,A]=(0,r.useState)([]),[R,S]=(0,r.useState)([]),[I,M]=(0,r.useState)(!0),T=ef.find(e=>e.slug===j);T||(0,i.notFound)();let L=(x=T.id,ej.filter(e=>e.principleId===x)),P=L.flatMap(e=>ey(e.id));(0,r.useEffect)(()=>{L.length>0&&!b&&(y(L[0].id),K.z.trackLessonView(j,L[0].id)),M(!1)},[L,b,j]);let D=(0,r.useCallback)(e=>{y(e),v(null),K.z.trackLessonView(j,e)},[j]),F=(0,r.useCallback)((e,s)=>{y(s),v(e)},[]),W=(0,r.useCallback)(()=>{if(N){let e=L.find(e=>e.id===b);if(e){let s=ey(e.id),t=s.findIndex(e=>e.id===N);if(t<s.length-1)v(s[t+1].id);else{let e=L.findIndex(e=>e.id===b);e<L.length-1&&D(L[e+1].id)}}}else{let e=L.findIndex(e=>e.id===b);e<L.length-1&&D(L[e+1].id)}},[N,b,L,D]),_=(0,r.useCallback)(()=>{if(N){let e=L.find(e=>e.id===b);if(e){let s=ey(e.id),t=s.findIndex(e=>e.id===N);t>0?v(s[t-1].id):v(null)}}else{let e=L.findIndex(e=>e.id===b);e>0&&D(L[e-1].id)}},[N,b,L,D]),Z=(0,r.useCallback)(()=>{b&&!C.includes(b)&&(A(e=>[...e,b]),g.oR.success("Lesson marked complete!"))},[b,C]),B=(0,r.useCallback)(()=>{let e=document.querySelector("textarea");e&&e.focus()},[]);(0,r.useEffect)(()=>{let e=e=>{if(!(e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLInputElement))switch(e.code){case"KeyJ":e.preventDefault(),W();break;case"KeyK":e.preventDefault(),_();break;case"KeyM":e.preventDefault(),Z();break;case"KeyR":e.preventDefault(),B()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[W,_,Z,B]);let $=L.find(e=>e.id===b),O=N?P.find(e=>e.id===N):null,Y=L.findIndex(e=>e.id===b),U=L.length;return I?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("header",{className:"sticky top-0 z-50 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsx)("div",{className:"container mx-auto px-6",children:(0,a.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(p(),{href:"/principles",className:"flex items-center gap-2 text-muted-foreground hover:text-foreground",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Back to Principles"})]}),(0,a.jsx)("div",{className:"hidden sm:block h-6 border-l"}),(0,a.jsx)("h1",{className:"font-semibold text-foreground truncate",children:T.title})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"hidden sm:flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[Y+1," of ",U]}),(0,a.jsx)("div",{className:"relative h-8 w-8",children:(0,a.jsxs)("svg",{className:"h-full w-full transform -rotate-90",viewBox:"0 0 36 36",children:[(0,a.jsx)("path",{className:"stroke-muted",strokeDasharray:"100, 100",strokeWidth:"4",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),(0,a.jsx)("path",{className:"stroke-primary",strokeDasharray:"".concat((Y+1)/U*100,", 100"),strokeWidth:"4",strokeLinecap:"round",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:_,disabled:b===(null==(s=L[0])?void 0:s.id)&&!N,"aria-label":"Previous (K)",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:W,disabled:b===(null==(t=L[L.length-1])?void 0:t.id)&&!N,"aria-label":"Next (J)",children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>k(!w),className:"sm:hidden","aria-label":"Toggle navigation",children:w?(0,a.jsx)(h.A,{className:"h-4 w-4"}):(0,a.jsx)(u.A,{className:"h-4 w-4"})})]})]})})}),(0,a.jsx)("div",{className:"container mx-auto px-6 py-6",children:(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-12",children:[(0,a.jsx)("aside",{className:(0,o.cn)("lg:col-span-3","lg:block",w?"block":"hidden"),children:(0,a.jsx)("div",{className:"sticky top-24",children:(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{className:"pb-4",children:(0,a.jsx)(l.ZB,{className:"text-base",children:"Lessons & Activities"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)(E,{lessons:L,activities:P,currentLessonId:b||void 0,currentActivityId:N||void 0,completedLessons:C,completedActivities:R,onLessonSelect:D,onActivitySelect:F})})]})})}),(0,a.jsx)("main",{className:"lg:col-span-6 space-y-6",children:O?(0,a.jsxs)("div",{children:["REFLECTION"===O.type&&(0,a.jsx)(Q,{activityId:O.id,payload:O.payload,onSave:(e,s)=>{console.log("Saving reflection:",e,s),S(e=>[...e,O.id])}}),"SIMULATION"===O.type&&(0,a.jsx)(ea,{activityId:O.id,payload:O.payload,onChoiceSelect:(e,s)=>{console.log("Choice selected:",e,s),S(e=>[...e,O.id])}}),"FIELD_EXPERIMENT"===O.type&&(0,a.jsx)(em,{activityId:O.id,payload:O.payload,onSubmit:(e,s,t)=>{console.log("Field experiment submitted:",e,s,t),S(e=>[...e,O.id])}})]}):$?(0,a.jsxs)("div",{className:"space-y-6",children:[$.muxAssetId&&(0,a.jsx)(z,{muxAssetId:$.muxAssetId,title:$.title}),(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"pt-6",children:(0,a.jsx)(G,{children:(0,a.jsxs)("div",{className:"prose prose-lg max-w-none dark:prose-invert",children:[(0,a.jsx)("h1",{children:$.title}),(0,a.jsxs)("p",{children:["This would render the MDX content from"," ",$.mdxPath]}),(0,a.jsx)("p",{children:"For now, showing placeholder content as the MDX system needs additional setup for dynamic imports."})]})})})})]}):(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"pt-6",children:(0,a.jsx)("p",{children:"No lesson selected"})})})}),(0,a.jsx)("aside",{className:"lg:col-span-3",children:(0,a.jsxs)("div",{className:"sticky top-24 space-y-6",children:[(0,a.jsx)(eg,{principleTitle:T.title,lessons:L,activities:P,currentLessonId:b||void 0,completedLessons:C,completedActivities:R,onMarkComplete:Z}),(null==$?void 0:$.keyTakeaways)&&(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{className:"text-base",children:"Key Takeaways"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("ul",{className:"space-y-2",children:$.keyTakeaways.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,a.jsx)("span",{className:"text-primary",children:"•"}),(0,a.jsx)("span",{children:e})]},s))})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsxs)(l.ZB,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white text-xs font-bold",children:"\uD83C\uDFC6"}),"Mastery Check"]}),(0,a.jsx)(l.BT,{children:"Test your understanding and earn badges"})]}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-sm text-text-secondary",children:"Complete all lessons to unlock the quiz and earn your badge!"}),(0,a.jsx)(p(),{href:"/principles/".concat(j,"/quiz"),children:(0,a.jsx)(n.$,{className:"w-full",variant:"premium",disabled:C.length<L.length,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83C\uDFAF"}),(0,a.jsx)("span",{children:"Take Quiz"})]})})}),C.length<L.length&&(0,a.jsxs)("div",{className:"text-xs text-text-muted",children:["Progress: ",C.length,"/",L.length," ","lessons completed"]})]})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{className:"text-base",children:"Notes"}),(0,a.jsx)(l.BT,{children:"Private notes for this lesson"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("textarea",{placeholder:"Capture your thoughts, questions, and insights here...",className:"w-full min-h-[100px] text-sm border-none bg-transparent resize-none focus:outline-none"})})]})]})})]})}),(0,a.jsx)("div",{className:"fixed bottom-4 right-4 z-40",children:(0,a.jsx)(l.Zp,{className:"opacity-50 hover:opacity-100 transition-opacity",children:(0,a.jsx)(l.Wu,{className:"p-3 text-xs text-muted-foreground",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("kbd",{children:"J"})," Next • ",(0,a.jsx)("kbd",{children:"K"})," Previous"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("kbd",{children:"M"})," Mark Complete • ",(0,a.jsx)("kbd",{children:"R"})," Focus Reflection"]})]})})})})]})}},6948:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>n,aR:()=>l});var a=t(5155),r=t(2115),i=t(4269);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("rounded-xl border bg-surface-glass backdrop-blur-glass border-glass-border text-text-primary shadow-glass elegant-transition-slow hover:shadow-elevation",t),...r})});n.displayName="Card";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,i.cn)("font-satoshi text-2xl font-semibold leading-none tracking-tight text-text-primary",t),...r})});o.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-text-secondary",t),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",t),...r})});d.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},8372:(e,s,t)=>{Promise.resolve().then(t.bind(t,6707))}},e=>{e.O(0,[999,619,663,88,572,441,255,358],()=>e(e.s=8372)),_N_E=e.O()}]);